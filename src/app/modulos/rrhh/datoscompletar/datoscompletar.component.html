<div *ngIf="cargando" class="loading">
  <div class="spin"></div>
</div>
<div class="container-fluid">
  <form action="" name="form">
    <div class="row">
      <!-- BUSCADOR DE USUARIOS -->
      <div
        class="content content-success"
        name="pnl_busqueda"
        id="pnl_busqueda"
      >
        <div class="content-header with-border">
          <h3 class="content-title text-green">
            <strong>USUARIOS - LISTA DE USUARIOS</strong>
          </h3>
        </div>
        <div class="content-body">
          <div class="rowlocal">
            <div
              class="col-xs-offset-1 col-sm-offset-3 col-md-offset-3 col-lg-offset-4 col-xs-10 col-sm-5 col-md-5 col-lg-4"
            >
              <div class="panel panel-success">
                <div class="panel-heading text-center">
                  B&uacute;squeda de Usuarios
                </div>
                <div class="panel-body">
                  <div class="row">
                    <div class="form-horizontal">
                      <div class="form-group">
                        <label class="control-label col-sm-4" for="busqueda"
                          >Nombres:</label
                        >
                        <div class="col-sm-7">
                          <input
                            class="form-control"
                            type="text"
                            name="nombres"
                            id="nombres"
                            [(ngModel)]="m_nombres"
                          />
                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-sm-4" for="busqueda"
                          >Apellido Paterno:</label
                        >
                        <div class="col-sm-7">
                          <input
                            class="form-control"
                            type="text"
                            name="apaterno"
                            id="apaterno"
                            [(ngModel)]="m_apaterno"
                          />
                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-sm-4" for="busqueda"
                          >Apellido Materno:</label
                        >
                        <div class="col-sm-7">
                          <input
                            class="form-control"
                            type="text"
                            name="amaterno"
                            id="amaterno"
                            [(ngModel)]="m_amaterno"
                          />
                        </div>
                      </div>

                      <div class="panel-footer">
                        <div class="row">
                          <div class="col-md-6">
                            <button
                              type="button"
                              class="btn btn-primary btn-block"
                              id="BuscarUsuarios"
                              name="BuscarUsuarios"
                              (click)="BuscarUsuarios()"
                            >
                              <i class="fa fa-search" aria-hidden="true"></i>
                              Buscar
                            </button>
                          </div>
                          <div class="col-md-6">
                            <button
                              type="button"
                              class="btn btn-default btn-block"
                              id="LimpiarBusqueda"
                              name="LimpiarBusqueda"
                              (click)="LimpiarBusqueda()"
                            >
                              <i class="fa fa-eraser" aria-hidden="true"></i>
                              Limpiar
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="content-footer"></div>
      </div>
      <!-- FIN BUSCADOR DE USUARIOS -->

      <!-- LISTADO DE USUARIOS-->
      <div
        *ngIf="pnlListaProveidos == true"
        class="content content-success"
        name="pnl_hjproveidos"
        id="pnl_hjproveidos"
      >
        <div class="content-header with-border"></div>
        <div class="content-body">
          <div class="rowlocal">
            <div class="col-sm-offset-1 col-lg-offset-1 col-sm-10 col-lg-10">
              <div class="panel panel-success">
                <div class="panel-heading text-center">Listado de Usuarios</div>
                <div class="panel-body">
                  <!-- INICIO TABLA-->
                  <table
                    class="table table-primary table-striped table-condensed table-hover dt-Proveidos"
                  >
                    <thead>
                      <tr>
                        <th>Id Usuario</th>
                        <th>Nombres</th>
                        <th>Apellido Paterno</th>
                        <th>Apellido Materno</th>
                        <th>Estado</th>
                        <th>Id Biometrico</th>
                        <th>Editar</th>
                        <!-- <th>Eliminar</th> -->
                      </tr>
                    </thead>
                    <tfoot>
                      <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                    </tfoot>
                    <tbody>
                      <tr
                        *ngFor="
                          let row_registros of dts_ListaUsuarios;
                          let i = index
                        "
                      >
                        <td>{{ row_registros.id }}</td>
                        <td>{{ row_registros.nombre }}</td>
                        <td>{{ row_registros.paterno }}</td>
                        <td>{{ row_registros.materno }}</td>
                        <td>{{ row_registros.estado }}</td>
                        <td>{{ row_registros.t_userid }}</td>
                        <td>
                          <button
                            class="btn btn-info btn-circle-sm"
                            type="button"
                            data-toggle="modal"
                            data-target="#modalNuevoUsuario"
                            title="Editar"
                            (click)="muestraDatos(row_registros)"
                          >
                            <span class="glyphicon glyphicon-pencil"></span>
                          </button>
                          <button
                            class="btn btn-warning btn.circle-sm"
                            type="button"
                            data-toggle="modal"
                            data-target="#modalBiometrico"
                            title="BiomÃ©trico"
                            [ngStyle]="{
                              visibility:
                                row_registros.t_userid != 0
                                  ? 'hidden'
                                  : 'visible'
                            }"
                            (click)="muestraDatosBiometrico(row_registros)"
                          >
                            <span class="glyphicon glyphicon-user"></span>
                          </button>
                        </td>
                        <!-- <td>
                                                    <button class="btn btn-danger btn-circle-sm" type="button" data-toggle="modal" data-target="#modalEliminaRegistro" (click)="EliminarRegistro(row_registros)">
                        <span class="glyphicon glyphicon-remove"></span>
                      </button>
                                                </td> -->
                      </tr>
                    </tbody>
                  </table>
                  <!-- FIN TABLA-->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- FIN  LISTADO USUARIOS -->

      <!-- INICIO MODAL FORMULARIO USUARIO -->
      <div
        class="modal fade"
        name="modalFormularioUsuario"
        id="modalFormularioUsuario"
        tabindex="-1"
        role="dialog"
        aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true"
        data-backdrop="static"
        data-keyboard="false"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">
                MODIFICACION DATOS USUARIO
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
                (click)="ActualizaUsuario()"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="form-horizontal">
                  <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >Nombres:</label
                    >
                    <div class="col-sm-7">
                      <input
                        class="form-control"
                        type="text"
                        name="e_nombres"
                        id="e_nombres"
                        list="browsers"
                        autocomplete="off"
                        readonly
                        [(ngModel)]="nombre_completo"
                      />
                    </div>
                  </div>

                  <!-- <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >CUA:</label
                    >
                    <div class="col-sm-7">                      
                      <input
                        class="form-control"
                        type="number"
                        maxlength="20"
                        name="fn"
                        id="fn"
                        [(ngModel)]="cua"
                      />
                    </div>
                  </div> -->
                  <!-- <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >NÃºmero Cuenta:</label
                    >
                    <div class="col-sm-7">
                      <input
                        class="form-control"
                        type="number"
                        name="m_cuenta"
                        id="m_cuenta"
                        maxlength="20"
                        autocomplete="off"
                        [(ngModel)]="numero_cuenta"
                      />
                    </div>
                  </div> -->
                  <!-- <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >Contrato:</label
                    >
                    <div class="col-sm-7">
                      <input
                        class="form-control"
                        type="text"
                        name="m_contrato"
                        maxlength="255"
                        id="m_contrato"
                        autocomplete="off"
                        [(ngModel)]="contrato"
                      />
                    </div>
                  </div> -->
                  <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >Fecha Inicio Laboral:</label
                    >
                    <div class="col-sm-7">
                      <input
                        type="date"
                        class="form-control"
                        maxlength="10"
                        name="m_fecContrato"
                        id="m_fecContrato"
                        autocomplete="off"
                        [(ngModel)]="fecha_inicio"
                        [disabled]="estado_semaforo > 1"
                      />
                    </div>
                  </div>
                  <hr />
                  <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >Id BiomÃ©trico:</label
                    >
                    <div class="col-sm-7">
                      <input
                        class="form-control"
                        type="number"
                        name="m_biometrico"
                        id="m_biometrico"
                        autocomplete="off"
                        [(ngModel)]="id_biometrico"
                        readonly
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
                (click)="ActualizaUsuario()"
              >
                Cerrar
              </button>
              <button
                type="button"
                class="btn btn-primary"
                name="btnEditar"
                id="btnEditar"
                (click)="ActualizaUsuario()"
              >
                Actualizar
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- FIN MODAL FORMULARIO USUARIO -->

      <!-- INICIO MODAL BIOMETRICO -->
      <div
        class="modal fade"
        name="modalBiometrico"
        id="modalBiometrico"
        tabindex="-1"
        role="dialog"
        aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">
                ADICION DE BIOMETRICO
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="form-horizontal">
                  <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >Nombres:</label
                    >
                    <div class="col-sm-7">
                      <input
                        class="form-control"
                        type="text"
                        name="e_nombres"
                        id="e_nombres"
                        list="browsers"
                        autocomplete="off"
                        readonly
                        [(ngModel)]="nombre_completo"
                      />
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-4" for="busqueda"
                      >Id BiomÃ©trico:</label
                    >
                    <div class="col-sm-7">
                      <input
                        class="form-control"
                        type="number"
                        name="m_biometrico"
                        id="m_biometrico"
                        autocomplete="off"
                        [(ngModel)]="id_biometrico"
                      />
                    </div>
                  </div>
                  <hr />
                  <div class="form-group">
                    <div class="row">
                      <label class="control-label col-sm-4" for="busqueda"
                        >Grupo Funcionario:</label
                      >
                      <div class="col-sm-7">
                        <select
                          id="idGrupoFuncionario"
                          class="form-control"
                          name="idGrupoFuncionario"
                          [(ngModel)]="id_grupoFuncionario"
                        >
                          <option
                            *ngFor="
                              let row_grupoFuncionario of dts_grupoFuncionario
                            "
                            [ngValue]="row_grupoFuncionario.IdGrupoFuncionario"
                          >
                            {{
                              row_grupoFuncionario.DescripcionGrupoFuncionario +
                                "-" +
                                row_grupoFuncionario.Observacion
                            }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="row">
                      <label class="control-label col-sm-4" for="busqueda"
                        >Tipo Horario:</label
                      >
                      <div class="col-sm-7">
                        <select
                          id="idTipoHorario"
                          class="form-control"
                          name="idTipoHorario"
                          [(ngModel)]="id_tipoHorario"
                        >
                          <option
                            *ngFor="let row_tipoHorario of dts_tipoHorario"
                            [ngValue]="row_tipoHorario.IdTipoHorario"
                          >
                            {{ row_tipoHorario.DescripcionTipoHorario }}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Cerrar
              </button>
              <button
                *ngIf="
                  id_biometrico != 0 &&
                  id_biometrico != null &&
                  id_biometrico != undefined &&
                  id_grupoFuncionario != undefined &&
                  id_tipoHorario != undefined
                "
                type="button"
                class="btn btn-primary"
                name="btnBiometrico"
                id="btnBiometrico"
                (click)="ActualizaBiometricoUsuario()"
              >
                Actualizar
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- FIN MODAL BIOMETRICO -->
    </div>
  </form>
</div>
