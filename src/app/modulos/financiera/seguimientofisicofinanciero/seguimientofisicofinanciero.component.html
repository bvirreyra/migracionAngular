<div id="pnl_formulario">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="page-header">
                <h2>Seguimiento Físico & Financiero</h2>
            </div>
        </div>
    </div>
    <div>
        <button type="button" class="btn btn-primary  pull-left" title="Volver Panel" name="btnVolverGv" id="btnVolverGv" (click)="paneles('VER_GRIDVIEW')"><i class="fa fa-reply fa-2x">
            </i></button>
    </div>
    <div class="row">
        <div class="col-lg-7 col-md-7 col-sm-7 col-lg-offset-3 col-md-offset-3 col-sm-offset-3">
            <form action="" method="post" enctype="multipart/form-data">
                <div class="panel panel-primary">
                    <div class="panel-heading clearfix">
                    </div>
                    <div class="panel-body">
                        <div class="bg-primary text-white">SEGUIMIENTO FISICO</div>

                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Nombre del Proyecto:</label>
                            </div>
                            <div>
                                <textarea class="form-control" id="nombreproyecto" maxlength="200" rows="4" name="nombreproyecto" [(ngModel)]="m_nombreproyecto" onKeyDown="A(event,this.form.codigo_sisin)" required></textarea>
                            </div>
                        </div>
                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Codigo SISIN:</label>
                            </div>
                            <div>
                                <input class="form-control" id="codigo_sisin" maxlength="200" rows="4" name="codigo_sisin" [(ngModel)]="m_codigo_sisin" onKeyDown="A(event,this.form.m_departamento)" required>
                            </div>
                        </div>
                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Departamento:</label>
                            </div>
                            <div>
                                <select id="m_departamento" class="form-control" name="m_departamento" [(ngModel)]="m_departamento" (change)="filtraProvincia()" onKeyDown="A(event,this.form.m_provincia)">
                                    <option value='0' disabled="m_departamento =='0'">Seleccione...</option>
                                    <option *ngFor="let row_registros of dts_departamento"
                                        [ngValue]="row_registros.codigo_departamento">{{row_registros.nombre}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Provincia:</label>
                            </div>
                            <div>
                                <select id="m_provincia" class="form-control" name="m_provincia" [(ngModel)]="m_provincia" (change)="filtraMunicipio()" onKeyDown="A(event,this.form.m_municipio)">
                                    <option value='0' disabled="m_provincia =='0'">Seleccione...</option>
                                    <option *ngFor="let row_registros of dts_provinciafiltrada"
                                        [ngValue]="row_registros.codigo_provincia">{{row_registros.nombre}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Municipio:</label>
                            </div>
                            <div>
                                <select id="m_municipio" class="form-control" name="m_municipio" [(ngModel)]="m_municipio" onKeyDown="A(event,this.form.btnRegistrar)">
                                    <option value='0' disabled="m_municipio =='0'">Seleccione...</option>
                                    <option *ngFor="let row_registros of dts_municipiofiltrado"
                                        [ngValue]="row_registros.codigo_municipio">{{row_registros.nombre}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="panel-footer">
                            <button type="button" class="btn btn-success btn-block" value="REGISTRAR" name="btnRegistrar" id="btnRegistrar" title="Guardar Seguimiento" (click)="inserta_seguimiento()">Registrar</button>
                            <button type="button" class="btn btn-success btn-block" value="ACTUALIZAR" name="btnActualizar" id="btnActualizar" (click)="actualiza_seguimiento()" title="Guardar Seguimiento">Actualizar</button>
                        </div>


                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
<div id="pnl_formulario_bandeja">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="page-header">
                <h2>Seguimiento Físico & Financiero</h2>
            </div>
        </div>
    </div>
    <div>
        <button type="button" class="btn btn-primary  pull-left" title="Volver Panel" name="btnVolverGv" id="btnVolverGv" (click)="paneles('VER_GRIDVIEW_BANDEJA')"><i class="fa fa-reply fa-2x">
            </i></button>
    </div>
    <div class="row">
        <div class="col-lg-7 col-md-7 col-sm-7 col-lg-offset-3 col-md-offset-3 col-sm-offset-3">
            <form action="" method="post" enctype="multipart/form-data">
                <div class="panel panel-primary">
                    <div class="panel-heading clearfix">
                    </div>
                    <div class="panel-body">
                        <div class="bg-primary text-white">SEGUIMIENTO FISICO</div>

                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Nombre del Proyecto:</label>
                            </div>
                            <div>
                                <textarea class="form-control" id="nombreproyecto2" maxlength="200" rows="4" name="nombreproyecto2" [(ngModel)]="m_nombreproyecto" onKeyDown="A(event,this.form.codigo_sisin)" required></textarea>
                            </div>
                        </div>
                        <div class="form-group ">
                            <div>
                                <label for="Gestion">Codigo SISIN:</label>
                            </div>
                            <div>
                                <input class="form-control" id="codigo_sisin2" maxlength="200" rows="4" name="codigo_sisin2" [(ngModel)]="m_codigo_sisin" onKeyDown="A(event,this.form.estadoproyecto)" required>
                            </div>
                        </div>
                        <div id="pnl_formulario2">
                            <!-- SEGUNDA VISTA DESPUES DE INSERTAR -->
                            <div *ngIf="vpanel_Tecnico==true">

                                <div class="form-group ">
                                    <div>
                                        <label for="Gestion">Estado situación del Proyecto/Problema
                                            Identificado</label>
                                    </div>
                                    <div>
                                        <textarea class="form-control" id="estadoproyecto" minlength="50" rows="4" name="estadoproyecto" [(ngModel)]="m_estadoproyecto" onKeyDown="A(event,this.form.acciones)" required></textarea>
                                    </div>
                                </div>

                                <div class="form-group ">
                                    <div>
                                        <label for="Gestion">Acciones a Tomar</label>
                                    </div>
                                    <div>
                                        <textarea class="form-control" id="acciones" minlength="50" rows="4" name="acciones" [(ngModel)]="m_acciones" onKeyDown="A(event,this.form.plazosolucion)" required></textarea>
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <label for="Gestion">Plazo de Solución</label>
                                    <input type="number" class="form-control" id="plazosolucion" name="plazosolucion" [(ngModel)]="m_plazosolucion" onKeyDown="A(event,this.form.nomb_responsable)" required>
                                </div>
                                <div class="form-group">
                                    <div class="bg-info text-black">RESPONSABLE - CARGO
                                        <!-- <button type="button" class="btn btn-success btn-circle pull-right"
                                                title="Nuevo Responsable" name="btnRegitraResponsable"
                                                id="btnRegitraResponsable" (click)="inserta_responsable()"><i
                                                    class="fa fa-plus">
                                                </i></button> -->
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-lg-6">
                                        <label for="Gestion">Nombre Responsable</label>
                                        <input class="form-control" id="nomb_responsable" name="nomb_responsable" [(ngModel)]="m_nombresponsable" onKeyDown="A(event,this.form.cargo_responsable)">
                                    </div>
                                    <div class="col-lg-6">
                                        <label for="Gestion">Cargo Responsable</label>
                                        <input class="form-control" id="cargo_responsable" name="cargo_responsable" [(ngModel)]="m_cargoresponsable" onKeyDown="A(event,this.form.avanceacumulado)">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="Gestion">Porcentaje de Avance Acumulado</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="avanceacumulado" name="avanceacumulado" [(ngModel)]="m_avanceacumulado" required>
                                        <span class="input-group-addon"><strong>%</strong></span>
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="vpanel_Financiero==true">
                                <div class="bg-primary text-white">SEGUIMIENTO FINANCIERO</div>
                                <div class="form-group">
                                    <label for="Gestion">Importe de Ejecución en el mes</label>

                                    <select class="form-control" name="m_mes" id="m_mes" [(ngModel)]="m_mes" onKeyDown="A(event,this.form.monto)">
                                        <option value="ENERO">Enero</option>
                                        <option value="FEBRERO">Febrero</option>
                                        <option value="MARZO">Marzo</option>
                                        <option value="ABRIL">Abril</option>
                                        <option value="MAYO">Mayo</option>
                                        <option value="JUNIO">Junio</option>
                                        <option value="JULIO">Julio</option>
                                        <option value="AGOSTO">Agosto</option>
                                        <option value="SEPTIEMBRE">Septiembre</option>
                                        <option value="OCTUBRE">Octubre</option>
                                        <option value="NOVIEMBRE">Noviembre</option>
                                        <option value="DICIEMBRE">Diciembre</option>
                                    </select>

                                </div>



                                <div class="form-group">

                                    <label for="Gestion">Monto - Registro C-31:</label>


                                    <div class="input-group">
                                        <input type="text" class="form-control" id="monto" name="monto" required [(ngModel)]="m_monto" onKeyDown="A(event,this.form.detallec31)">
                                        <span class="input-group-addon"><strong>Bs.</strong></span>
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <label for="Gestion">Detalle - C31</label>
                                    <input type="text" class="form-control" id="detallec31" name="detallec31" [(ngModel)]="m_detallec31" required>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <button type="button" class="btn btn-success btn-block" value="ACTUALIZAR" name="btnActualizarDetalle" id="btnActualizarDetalle" (click)="actualiza_seguimiento_detalle()" title="Actualizar Detalle">Actualizar</button>
                            </div>
                            <div class="panel-footer">
                                <button type="button" class="btn btn-success btn-block" value="REGISTRAR" name="btnRegistrarDetalle" id="btnRegistrarDetalle" title="Guardar Seguimiento Físico" (click)="inserta_seguimiento_detalle()">Registrar</button>
                            </div>


                        </div>
                        <!-- SEGUNDA VISTA DESPUES DE INSERTAR -->

                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<div id="pnl_gridview" name="pnl_gridview">
    <div class="page-header" style="text-align:center">
        <h2>Seguimiento Físico & Financiero</h2>
    </div>
    <div class="panel panel-primary">

        <div class="panel-heading clearfix" *ngIf="vbtn_NuevoProyecto==true">
            <button type="button" class="btn btn-success pull-right" title="Nueva Ficha" (click)="paneles('NUEVA_FICHA')"><i class="fa fa-plus">Nueva Ficha
                </i></button>
        </div>

        <div class="panel-body">
            <!-- <table class="table table-condensed table-hover dt-seguimiento"> -->
            <table class="dt-seguimiento">
                <thead>
                    <tr>
                        <th>Nro.</th>
                        <th>Departamento</th>
                        <th>Provincia</th>
                        <th>Municipio</th>
                        <th>Nombre de Proyecto</th>
                        <th>Codigo Sisin</th>
                        <th>Fecha Registro</th>
                        <th>Usuario Registro</th>
                        <th>Seleccione...</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tfoot>
                <tbody>
                    <tr *ngFor="let row_registros of dts_seguimiento; let i = index;">
                        <td>{{i+1}}</td>
                        <td>{{row_registros._departamento}}</td>
                        <td>{{row_registros._provincia}}</td>
                        <td>{{row_registros._municipio}}</td>
                        <td>{{row_registros._nomb_proyecto}}</td>
                        <td>{{row_registros._codigo_sisin}}</td>
                        <td>{{row_registros._fecha_registro | date: 'dd/MM/yyyy'}}</td>
                        <td>{{row_registros._usuario_registro}}</td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <button type="button" class="btn btn-warning btn-md" (click)="preactualiza_seguimiento(row_registros)" *ngIf="vbtn_EditaProyecto==true">
                                    <i class="fa fa-edit" aria-hidden="true" title="Actualizar Registro"></i>
                                </button>
                                <!-- <a title="Descargar Reporte" *ngIf="row_registros._usuario_tec!='' && row_registros._usuario_fin!='' "
                                            class="btn btn-success   btn-md" target="_blank" ti
                                            href="{{url_reporte}}/rptInformeFinanciero.php?id={{row_registros._id_seg}}"><i
                                                class="fa fa-file-pdf-o" aria-hidden="true" ></i></a>
                                        -->

                                <button type="button" class="btn btn-info btn-md" (click)="ver_bandeja(row_registros)" title="Ver Bandeja">
                                    <i class="fa fa-id-card" aria-hidden="true"></i>
                                </button>
                                <button *ngIf="vusrAdministrador==true" type="button" class="btn btn-danger btn-md" (click)="elimina_seguimiento(row_registros._id_seg)" title="Eliminar Registro">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>
<div id="pnl_gridview_bandeja" name="pnl_gridview_bandeja">
    <div class="page-header" style="text-align:center">
        <h2>Seguimiento Físico & Financiero</h2><br />
        <h2>{{m_nombreproyecto}}</h2>
    </div>
    <div>
        <button type="button" class="btn btn-primary  pull-left" title="Volver Panel" name="btnVolverGv" id="btnVolverGv" (click)="paneles('VER_GRIDVIEW')"><i class="fa fa-reply fa-2x">
            </i></button>
    </div>


    <div class="panel panel-primary">

        <div class="panel-heading clearfix">

            <button type="button" class="btn btn-success pull-right" *ngIf="vbtn_NuevoSeguimiento==true" title="Nueva Ficha" (click)="paneles('NUEVO_SEGUIMIENTO')"><i class="fa fa-plus">Nuevo Seguimiento
                </i></button>

        </div>
        <div class="panel-body">
            <table class="table table-condensed table-hover dt-seguimiento_mes">
                <thead>
                    <tr>
                        <th>Nro.</th>
                        <th>Mes</th>
                        <th>Fecha Reg. Tec.</th>
                        <th>Usuario Tecnico</th>
                        <th>Fecha Reg. Fin.</th>
                        <th>Usuario Financiero</th>
                        <th>Seleccione...</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row_registros of dts_seguimiento_mes; let i = index;">

                        <td>{{i+1}}</td>
                        <td>{{row_registros._importe_mes}}</td>
                        <td>{{row_registros._fecha_tec | date: 'dd/MM/yyyy HH:mm'}}</td>
                        <td>{{row_registros._usuario_tec}}</td>
                        <td>{{row_registros._fecha_fin | date: 'dd/MM/yyyy HH:mm'}}</td>
                        <td>{{row_registros._usuario_fin}}</td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <button type="button" class="btn btn-warning btn-md" *ngIf="m_mes_actual==(row_registros._fecha_fin | date: 'MM') && m_gestion==(row_registros._fecha_fin | date: 'yyyy')" (click)="preactualiza_seguimiento_detalle(row_registros)">
                                    <i class="fa fa-edit" aria-hidden="true" title="Actualizar Registro"></i>
                                </button>
                                <a title="Descargar Reporte" *ngIf="row_registros._usuario_tec!='' && row_registros._usuario_fin!=''" class="btn btn-success   btn-md" target="_blank" href="{{url_reporte}}/modulos/financiera/rptInformeFinanciero.php?id_seg={{row_registros._id_seg}}&id_seg_detalle={{row_registros._id_seg_detalle}}"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></a>

                                <button type="button" class="btn btn-danger btn-md" *ngIf="vusrAdministrador==true" (click)="elimina_seguimiento_detalle(row_registros._id_seg,row_registros._id_seg_detalle)" title="Eliminar Registro">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>